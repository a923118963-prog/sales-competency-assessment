<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>销售岗位胜任力评估 - CDN版</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Framer Motion -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/10.16.4/framer-motion.min.js"></script>
    
    <!-- Tailwind CSS 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: 'oklch(0.96 0.01 200)',
                        foreground: 'oklch(0.15 0.02 240)',
                        card: 'oklch(1 0 0 / 0.7)',
                        'card-foreground': 'oklch(0.15 0.02 240)',
                        primary: 'oklch(0.15 0.02 240)',
                        'primary-foreground': 'oklch(1 0 0)',
                        accent: 'oklch(0.65 0.2 250)',
                        'accent-foreground': 'oklch(1 0 0)',
                        border: 'oklch(0 0 0 / 0.08)',
                    },
                    borderRadius: {
                        DEFAULT: '2rem',
                    },
                    fontFamily: {
                        sans: ['Geist', 'Geist Fallback', 'sans-serif'],
                    },
                },
            },
            plugins: [],
        }
        
        // 自定义工具类
        tailwind.config.plugins.push(function({ addUtilities, addBase, theme }) {
            addUtilities({
                '.glass': {
                    'background': 'rgba(255, 255, 255, 0.4)',
                    'backdrop-filter': 'blur(20px)',
                    '-webkit-backdrop-filter': 'blur(20px)',
                    'border': '1px solid rgba(255, 255, 255, 0.5)',
                    'box-shadow': '0 8px 32px 0 rgba(31, 38, 135, 0.07)',
                },
                '.liquid-form': {
                    'border-radius': '60% 40% 30% 70% / 60% 30% 70% 40%',
                    'animation': 'liquid 15s ease-in-out infinite',
                },
            })
            
            addBase({
                '*': {
                    'border-color': theme('colors.border'),
                },
                'body': {
                    'background-color': theme('colors.background'),
                    'color': theme('colors.foreground'),
                    'overflow': 'hidden',
                    'font-family': theme('fontFamily.sans'),
                },
            })
        })
    </script>
    
    <!-- 自定义 CSS -->
    <style type="text/tailwindcss">
        @layer utilities {
            @keyframes liquid {
                0%, 100% {
                    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
                }
                33% {
                    border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
                }
                66% {
                    border-radius: 50% 40% 30% 60% / 40% 50% 60% 30%;
                }
            }
        }
    </style>
    
    <!-- 自定义样式 -->
    <style>
        /* 全局样式 */
        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* 按钮样式 */
        .action-button {
            position: relative;
            height: 5rem;
            overflow: hidden;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            border: none;
            outline: none;
        }
        
        .action-button:active {
            transform: scale(0.98);
        }
        
        .action-button:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }
        
        .action-button .gradient-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top right, rgba(255, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .action-button.black:hover .gradient-overlay {
            opacity: 1;
        }
        
        .action-button .button-text {
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body>
    <main class="relative flex flex-col min-h-screen w-full p-8 overflow-hidden">
        <!-- 背景装饰 -->
        <div class="absolute inset-0 pointer-events-none overflow-hidden opacity-40">
            <motion.div
                class="absolute -top-20 -right-20 w-96 h-96 bg-accent/20 rounded-full blur-3xl"
                animate={{ y: [0, -20, 0], rotate: [0, 5, 0] }}
                transition={{ duration: 8, repeat: Infinity, ease: "easeInOut" }}
            ></motion.div>
            <div class="absolute top-1/4 left-1/4 w-[60vw] h-[60vw] bg-white/40 liquid-form blur-sm border border-white/50"></div>
        </div>

        <!-- 倒计时部分 -->
        <div class="relative z-10 w-full mb-8">
            <div class="flex justify-between items-end mb-2">
                <span class="text-[10px] uppercase tracking-[0.3em] font-medium opacity-40">System.Time_Remaining</span>
                <span class="text-xl font-light tabular-nums" id="timerValue">15s</span>
            </div>
            <div class="w-full h-[2px] bg-black/5 rounded-full overflow-hidden">
                <motion.div
                    class="h-full bg-accent"
                    id="timerFill"
                    initial={{ width: "100%" }}
                    transition={{ duration: 1, ease: "linear" }}
                ></motion.div>
            </div>
        </div>

        <!-- 内容区域 -->
        <div class="relative z-10 flex-1 flex flex-col min-h-0">
            <!-- 介绍部分 -->
            <div id="introSection" class="flex-1 flex flex-col items-center justify-center text-center max-w-2xl mx-auto">
                <h1 class="text-5xl font-light leading-[1.1] tracking-tight text-balance mb-6">销售岗位胜任力评估</h1>
                <p class="text-base text-muted-foreground mb-8 leading-6">欢迎参加销售岗位胜任力评估。本评估将测试您在各种销售情境下的决策能力和销售技巧。</p>
                <ul class="text-left mx-auto max-w-md mb-8">
                    <li class="mb-4 flex items-center"><span class="text-accent font-bold mr-3 text-xl">•</span>共10道情境题</li>
                    <li class="mb-4 flex items-center"><span class="text-accent font-bold mr-3 text-xl">•</span>每道题15秒思考时间</li>
                    <li class="mb-4 flex items-center"><span class="text-accent font-bold mr-3 text-xl">•</span>选择最适合的选项</li>
                    <li class="flex items-center"><span class="text-accent font-bold mr-3 text-xl">•</span>评估完成后将显示结果</li>
                </ul>
                <button 
                    class="action-button black bg-primary text-primary-foreground rounded-2xl hover:shadow-2xl"
                    onclick="startAssessment()"
                >
                    <div class="gradient-overlay"></div>
                    <span class="button-text">开始评估</span>
                </button>
            </div>

            <!-- 情境部分 -->
            <div id="scenarioSection" class="flex-1 flex flex-col hidden">
                <div class="flex-1 flex flex-col">
                    <!-- 动态内容区域 -->
                    <motion.div
                        id="scenarioMotion"
                        class="flex-1 flex flex-col"
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        exit={{ opacity: 0, y: -20 }}
                        transition={{ duration: 0.3 }}
                    >
                        <span class="inline-block px-3 py-1 rounded-full border border-black/5 text-[10px] uppercase tracking-widest font-semibold bg-white/50 backdrop-blur-sm mb-4" id="scenarioLabel">情境.01</span>
                        <div class="flex-1 glass rounded-2xl p-10 flex flex-col justify-center relative overflow-hidden mb-8">
                            <div class="text-2xl md:text-3xl font-light leading-[1.6]" id="scenarioText"></div>
                        </div>

                        <!-- 选项容器 -->
                        <div class="grid grid-cols-2 gap-4 mb-8" id="optionsContainer"></div>

                        <!-- 提交按钮（仅在最后一题显示） -->
                        <div class="flex justify-center mt-8" id="submitButtonContainer" style="display: none;">
                            <button class="py-4 px-8 glass rounded-2xl text-sm font-medium tracking-widest uppercase hover:shadow-xl hover:scale-105 active:scale-95 transition-transform" id="submitBtn" onclick="submitAssessment()">提交评估</button>
                        </div>
                    </motion.div>
                </div>
            </div>

            <!-- 结果部分 -->
            <div id="resultsSection" class="flex-1 flex flex-col items-center justify-center text-center hidden">
                <div class="glass rounded-2xl p-10 max-w-2xl w-full">
                    <h2 class="text-4xl font-light tracking-tighter mb-6">评估结果</h2>
                    <div class="mb-4">维度 A 分数：<span id="dimensionAScore" class="text-xl font-medium">0</span></div>
                    <div class="mb-8">维度 B 分数：<span id="dimensionBScore" class="text-xl font-medium">0</span></div>
                    <div class="text-6xl font-light my-8" id="totalScore">0</div>
                    <button 
                        class="action-button black bg-primary text-primary-foreground rounded-2xl hover:shadow-2xl"
                        onclick="restartAssessment()"
                    >
                        <div class="gradient-overlay"></div>
                        <span class="button-text">重新评估</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <div class="relative z-10 pt-4 flex justify-between items-center opacity-30 text-[9px] uppercase tracking-[0.4em] font-medium">
            <span>Sales.Competency.Assessment</span>
            <div class="flex gap-4">
                <span>LAT: 35.6895</span>
                <span>LNG: 139.6917</span>
            </div>
        </div>
    </main>

    <script>
        // 题目数据
        const questions = [
            {
                "id": 1,
                "scenario": "你正在向一个重要客户推销产品，客户对你的产品表现出浓厚兴趣，但突然接到一个紧急电话，需要处理公司内部事务。",
                "option_a": "继续等待，直到客户处理完紧急事务，然后继续推销。",
                "option_b": "主动提出改日再约，并留下相关资料，让客户有时间仔细考虑。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 2,
                "scenario": "你已经与客户进行了多次沟通，客户对你的产品非常了解，但始终犹豫不决，担心产品的售后服务。",
                "option_a": "强调公司的售后服务政策，提供详细的服务承诺和案例。",
                "option_b": "提出提供试用服务，让客户亲身体验产品的质量和服务。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 3,
                "scenario": "你正在参加一个行业展会，一位潜在客户对你的产品表现出兴趣，但同时也在与其他竞争对手交谈。",
                "option_a": "主动上前介绍产品的独特优势，试图立即赢得客户的关注。",
                "option_b": "先观察客户与竞争对手的交流，了解客户的需求，然后再针对性地介绍产品。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 4,
                "scenario": "你的产品价格比竞争对手高，但质量更好。客户在比较后，对价格表示不满。",
                "option_a": "解释产品的质量优势和长期价值，说明高价格的合理性。",
                "option_b": "尝试提供一些优惠条件，如延长保修期或提供额外服务，以平衡价格差异。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 5,
                "scenario": "你已经与客户达成了初步合作意向，但在签署合同前，客户突然提出了一些额外的要求，这些要求超出了你的权限范围。",
                "option_a": "当场拒绝客户的额外要求，坚持按照原有合同条款执行。",
                "option_b": "表示需要向上级汇报，争取在合理范围内满足客户的要求，同时保持合作关系。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 6,
                "scenario": "你正在向一个新客户推销产品，客户对你的产品不熟悉，并且对新技术持怀疑态度。",
                "option_a": "详细介绍产品的技术规格和性能参数，试图说服客户。",
                "option_b": "通过简单的演示和实际案例，让客户直观地了解产品的价值和好处。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 7,
                "scenario": "你已经与客户合作多年，关系良好。但最近，客户开始减少订单量，并表示正在考虑其他供应商。",
                "option_a": "询问客户减少订单的原因，并承诺改进服务，以留住客户。",
                "option_b": "提供一些特别优惠，如折扣或促销活动，试图恢复客户的订单量。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 8,
                "scenario": "你正在向一个团队推销产品，团队成员意见不一致，有些人支持，有些人反对。",
                "option_a": "针对反对意见进行辩论，试图说服所有团队成员。",
                "option_b": "重点关注支持你的成员，通过他们来影响其他团队成员。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 9,
                "scenario": "为了赢单，你需要制定投标策略。你掌握了竞争对手产品的一个致命缺陷（虽然对方声称已解决）。",
                "option_a": "攻击痛点。在给客户的对比材料中重点放大这个缺陷，制造客户的恐惧心理，通过打压对手来上位。",
                "option_b": "专注自我。只强调我们方案的优势和价值，不主动评价友商，保持客观中立的专业形象。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            },
            {
                "id": 10,
                "scenario": "你所在的区域市场已经饱和，想要完成高增长目标，唯一的办法是去抢占同事负责的客户（撞单），公司规则对此界定模糊。",
                "option_a": "主动出击。市场是打出来的不是分出来的，谁有能力搞定客户谁就上，适度的内部竞争能激活团队。",
                "option_b": "坚守边界。严格遵守领地划分，哪怕业绩增长缓慢，也不去触碰同事的利益蛋糕，维持团队稳定。",
                "dimension_a_score": 1,
                "dimension_b_score": 1
            }
        ];

        // 全局变量
        let currentQuestionIndex = 0;
        let timeLeft = 15;
        let timer = null;
        let answers = {};
        let isAssessmentStarted = false;
        let timerFill = document.getElementById('timerFill');
        let timerValue = document.getElementById('timerValue');

        // 初始化页面
        function initPage() {
            timerFill.style.width = '100%';
        }

        // 开始评估
        function startAssessment() {
            isAssessmentStarted = true;
            document.getElementById('introSection').classList.add('hidden');
            document.getElementById('scenarioSection').classList.remove('hidden');
            
            currentQuestionIndex = 0;
            timeLeft = 15;
            answers = {};
            
            showQuestion();
            startTimer();
        }

        // 显示当前题目
        function showQuestion() {
            const question = questions[currentQuestionIndex];
            
            // 更新标题
            document.getElementById('scenarioLabel').textContent = `情境.${(currentQuestionIndex + 1).toString().padStart(2, '0')}`;
            
            // 更新情境文本
            document.getElementById('scenarioText').textContent = question.scenario;
            
            // 生成选项
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = `
                <button 
                    class="action-button ${answers[question.id] === 'a' ? 'black bg-primary text-primary-foreground' : 'glass bg-white/40 text-foreground'}"
                    data-option="a"
                    onclick="selectOption('a')"
                >
                    ${answers[question.id] === 'a' ? '<div class="gradient-overlay"></div>' : ''}
                    <span class="button-text">${question.option_a}</span>
                </button>
                <button 
                    class="action-button ${answers[question.id] === 'b' ? 'black bg-primary text-primary-foreground' : 'glass bg-white/40 text-foreground'}"
                    data-option="b"
                    onclick="selectOption('b')"
                >
                    ${answers[question.id] === 'b' ? '<div class="gradient-overlay"></div>' : ''}
                    <span class="button-text">${question.option_b}</span>
                </button>
            `;
            
            // 更新导航按钮
            updateNavigationButtons();
            
            // 重置计时器
            resetTimer();
        }

        // 选择选项
        function selectOption(option) {
            const question = questions[currentQuestionIndex];
            answers[question.id] = option;
            
            // 更新选项样式
            const buttons = document.querySelectorAll('.action-button');
            buttons.forEach((btn, index) => {
                const opt = index === 0 ? 'a' : 'b';
                if (opt === option) {
                    btn.className = 'action-button black bg-primary text-primary-foreground';
                    btn.innerHTML = '<div class="gradient-overlay"></div><span class="button-text">' + (opt === 'a' ? question.option_a : question.option_b) + '</span>';
                } else {
                    btn.className = 'action-button glass bg-white/40 text-foreground';
                    btn.innerHTML = '<span class="button-text">' + (opt === 'a' ? question.option_a : question.option_b) + '</span>';
                }
                btn.onclick = () => selectOption(opt);
            });
            
            // 如果不是最后一题，选择后自动进入下一题
            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    nextQuestion();
                }, 500); // 延迟500ms，让用户看到选择效果
            }
        }

        // 开始计时器
        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    nextQuestion();
                }
            }, 1000);
        }

        // 重置计时器
        function resetTimer() {
            clearInterval(timer);
            timeLeft = 15;
            updateTimer();
            startTimer();
        }

        // 更新计时器
        function updateTimer() {
            timerValue.textContent = `${timeLeft}s`;
            
            // 更新倒计时条动画
            const progress = (timeLeft / 15) * 100;
            timerFill.animate(
                { width: `${progress}%` },
                { duration: 1, ease: "linear" }
            );
            timerFill.style.width = `${progress}%`;
        }

        // 更新导航按钮
        function updateNavigationButtons() {
            const submitBtn = document.getElementById('submitBtn');
            const submitButtonContainer = document.getElementById('submitButtonContainer');
            
            if (currentQuestionIndex === questions.length - 1) {
                // 最后一题，显示提交按钮
                submitButtonContainer.style.display = 'flex';
            } else {
                // 不是最后一题，隐藏提交按钮
                submitButtonContainer.style.display = 'none';
            }
        }

        // 上一题
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        // 提交评估
        function submitAssessment() {
            clearInterval(timer);
            calculateResults();
        }

        // 计算结果
        function calculateResults() {
            let dimensionAScore = 0;
            let dimensionBScore = 0;
            
            Object.entries(answers).forEach(([questionId, option]) => {
                const question = questions.find(q => q.id === parseInt(questionId));
                if (question) {
                    if (option === 'a') {
                        dimensionAScore += question.dimension_a_score;
                    } else if (option === 'b') {
                        dimensionBScore += question.dimension_b_score;
                    }
                }
            });
            
            // 显示结果
            showResults(dimensionAScore, dimensionBScore);
        }

        // 显示结果
        function showResults(dimensionA, dimensionB) {
            document.getElementById('scenarioSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            
            // 更新分数
            document.getElementById('dimensionAScore').textContent = dimensionA;
            document.getElementById('dimensionBScore').textContent = dimensionB;
            document.getElementById('totalScore').textContent = dimensionA + dimensionB;
        }

        // 重新评估
        function restartAssessment() {
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('introSection').classList.remove('hidden');
            initPage();
        }

        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
